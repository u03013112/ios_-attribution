# MMM 类似思路

## 思路概述

1、 之前一直有个误区，即认为 MMM 的目标是还原 MMP 的数据。但实际上，MMM更多的是评估广告的效果，而MMP更多的是一种用户划分。所以存在分歧才是正常的。主要的是对目标是否有足够的准确预测，如果不能有效的预测每天的收入，那么可以预测趋势也是好的，比如7日均线。

2、更加重要的是如何小规模的验证，比如用一个国家的数据来验证，比如越南。这样才有可能测试 MMM 是否可行。 

3、 由于广告投放的复杂性，所以将广告先分类，按照媒体+广告类型，比如 Facebook+VO+AAA 是一种类型，Facebook+VO+AEO 是另一种类型。每种类型作为一组输入。

4、最终需要得到的结论是哪一种广告需要调整预算，所以最直接的模型 就是 输入为 广告类型 的实际花费，输出 为 整体（整个国家）的大盘收入。但是存在一些其它问题，比如每一种广告的花费与收入并不是线性关系，而是更类似指数函数关系，当花费比较低的时候增加花费可以有效的增加回收，但是花费较高的时候增加花费的回报增长的就会变慢甚至降低。所以需要考虑这种非线性关系。

5、在上一条中提到非线性关系的主要原因是当花费提高，又没有足够的用户可以展示广告的时候，会提高每千次展示费用，这样就会导致花费提高，但是收入并没有提高，甚至降低。所以是否要将广告展示次数作为输入也是一个问题。或者可以通过一个模型来预测每千次展示的费用，而后面则用展示次数与7日收入的关系来预测收入。这也适用于每安装的花费，同样的可以用花费来预测每安装的费用，而后面则用安装数与7日收入的关系来预测收入。

6、市场影响，由于季节性或者竞品广告投放，会影响到广告表现。而这个部分并不能获得足够明确的输入数据，比如竞品广告花费变化数据。这个部分应该怎么处理？直接添加一个时间输入（比如周数），然后直接将这个输入放到模型还是放到预测每千次展示费用的模型中？这个部分需要进一步验证。这个部分更加难以预测，只能通过同比来做，但是这样数据不足。另外竞品的推广并不能通过同比来发现。所以应该做一个中长期模型，再做一个短期模型，针对最近的行情进行拟合，然后两个模型在一定程度上进行融合。

## 步骤

1、尝试在安卓进行数据采集，并且暂时认为mmp的结论就是正确的mmm贡献，计算cpm、cpi等数据与mmp的r7usd进行相关性分析。顺便也看看花费与收入的相关性。

2、用安卓数据进行模型训练，然后尝试与mmp的结论进行对比。

3、如果有差异，看看是否可以有正确的趋势，这个说起来有点玄妙，想想办法。

## 初步结论

1、相关性：与r7usd相关的性都不太高。

Facebook Ads
             campaign_id     r7usd  impressions    clicks  installs      cost
campaign_id     1.000000 -0.145406    -0.142162 -0.219077 -0.278265 -0.197509
r7usd          -0.145406  1.000000     0.564598  0.569890  0.562892  0.577588
impressions    -0.142162  0.564598     1.000000  0.972728  0.934614  0.953631
clicks         -0.219077  0.569890     0.972728  1.000000  0.986770  0.976289
installs       -0.278265  0.562892     0.934614  0.986770  1.000000  0.963517
cost           -0.197509  0.577588     0.953631  0.976289  0.963517  1.000000
googleadwords_int
             campaign_id     r7usd  impressions    clicks  installs      cost
campaign_id     1.000000 -0.019800    -0.323298 -0.204472 -0.260451 -0.262827
r7usd          -0.019800  1.000000     0.400944  0.433564  0.490239  0.520005
impressions    -0.323298  0.400944     1.000000  0.963819  0.965914  0.957070
clicks         -0.204472  0.433564     0.963819  1.000000  0.983254  0.963778
installs       -0.260451  0.490239     0.965914  0.983254  1.000000  0.976971
cost           -0.262827  0.520005     0.957070  0.963778  0.976971  1.000000
bytedanceglobal_int
             campaign_id     r7usd  impressions    clicks  installs      cost
campaign_id     1.000000 -0.174938    -0.048655 -0.073156 -0.250415 -0.092619
r7usd          -0.174938  1.000000     0.261666  0.178030  0.328109  0.292378
impressions    -0.048655  0.261666     1.000000  0.479175  0.889734  0.791781
clicks         -0.073156  0.178030     0.479175  1.000000  0.367927  0.748735
installs       -0.250415  0.328109     0.889734  0.367927  1.000000  0.728479
cost           -0.092619  0.292378     0.791781  0.748735  0.728479  1.000000

2、按照广告分类，相关性
7日收入与花费的相关性比较高。

FB AAA
                r7usd  impressions    clicks  installs      cost
r7usd        1.000000     0.503267  0.513074  0.504037  0.522648
impressions  0.503267     1.000000  0.962293  0.913306  0.932313
clicks       0.513074     0.962293  1.000000  0.984404  0.967082
installs     0.504037     0.913306  0.984404  1.000000  0.953694
cost         0.522648     0.932313  0.967082  0.953694  1.000000


rolling 7 days
                r7usd7  impressions7   clicks7  installs7     cost7
r7usd7        1.000000      0.776490  0.773907   0.766435  0.808815
impressions7  0.776490      1.000000  0.969792   0.928003  0.940909
clicks7       0.773907      0.969792  1.000000   0.988685  0.969057
installs7     0.766435      0.928003  0.988685   1.000000  0.961775
cost7         0.808815      0.940909  0.969057   0.961775  1.000000
FB BAU
                r7usd  impressions    clicks  installs      cost
r7usd        1.000000     0.321431  0.307458  0.296626  0.315601
impressions  0.321431     1.000000  0.984214  0.964767  0.964664
clicks       0.307458     0.984214  1.000000  0.979124  0.966992
installs     0.296626     0.964767  0.979124  1.000000  0.945389
cost         0.315601     0.964664  0.966992  0.945389  1.000000


rolling 7 days
                r7usd7  impressions7   clicks7  installs7     cost7
r7usd7        1.000000      0.690394  0.671806   0.631699  0.688937
impressions7  0.690394      1.000000  0.994500   0.986088  0.980323
clicks7       0.671806      0.994500  1.000000   0.990936  0.975567
installs7     0.631699      0.986088  0.990936   1.000000  0.961679
cost7         0.688937      0.980323  0.975567   0.961679  1.000000
GG UAC
                r7usd  impressions    clicks  installs      cost
r7usd        1.000000     0.400944  0.433564  0.490239  0.520005
impressions  0.400944     1.000000  0.963819  0.965914  0.957070
clicks       0.433564     0.963819  1.000000  0.983254  0.963778
installs     0.490239     0.965914  0.983254  1.000000  0.976971
cost         0.520005     0.957070  0.963778  0.976971  1.000000


rolling 7 days
                r7usd7  impressions7   clicks7  installs7     cost7
r7usd7        1.000000      0.562657  0.673469   0.679478  0.695485
impressions7  0.562657      1.000000  0.975348   0.984836  0.977419
clicks7       0.673469      0.975348  1.000000   0.993911  0.995704
installs7     0.679478      0.984836  0.993911   1.000000  0.998023
cost7         0.695485      0.977419  0.995704   0.998023  1.000000
TT AEO
                r7usd  impressions    clicks  installs      cost
r7usd        1.000000     0.138098  0.116431  0.155473  0.178603
impressions  0.138098     1.000000  0.979160  0.910507  0.919405
clicks       0.116431     0.979160  1.000000  0.951675  0.883905
installs     0.155473     0.910507  0.951675  1.000000  0.890858
cost         0.178603     0.919405  0.883905  0.890858  1.000000


rolling 7 days
                r7usd7  impressions7   clicks7  installs7     cost7
r7usd7        1.000000      0.451914  0.462407   0.625390  0.545811
impressions7  0.451914      1.000000  0.993016   0.961089  0.972529
clicks7       0.462407      0.993016  1.000000   0.974703  0.953539
installs7     0.625390      0.961089  0.974703   1.000000  0.953262
cost7         0.545811      0.972529  0.953539   0.953262  1.000000
TT VO
                r7usd  impressions    clicks  installs      cost
r7usd        1.000000     0.269020  0.343158  0.456138  0.463177
impressions  0.269020     1.000000  0.608427  0.845407  0.791737
clicks       0.343158     0.608427  1.000000  0.524500  0.719939
installs     0.456138     0.845407  0.524500  1.000000  0.787738
cost         0.463177     0.791737  0.719939  0.787738  1.000000


rolling 7 days
                r7usd7  impressions7   clicks7  installs7     cost7
r7usd7        1.000000      0.451795  0.647495   0.712353  0.812852
impressions7  0.451795      1.000000  0.537654   0.823192  0.733433
clicks7       0.647495      0.537654  1.000000   0.502118  0.768113
installs7     0.712353      0.823192  0.502118   1.000000  0.765148
cost7         0.812852      0.733433  0.768113   0.765148  1.000000

## 目前发现7日滚动数据的相关性更高，但是不同的广告类型相关性不同，考虑不同模型

目前完全是使用相关系数，但是实际投放的情况应该是分段的，较低花费的时候花费对应收益较高，花费较高的时候花费对应收益较低，所以应该考虑分段的相关性
